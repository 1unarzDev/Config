#      __  __                 __                __
#     / / / /_  ______  _____/ /___ _____  ____/ /
#    / /_/ / / / / __ \/ ___/ / __ `/ __ \/ __  / 
#   / __  / /_/ / /_/ / /  / / /_/ / / / / /_/ /  
#  /_/ /_/\__, / .___/_/  /_/\__,_/_/ /_/\__,_/   
#        /____/_/                                 


# ------------------ #
#       SYSTEM       #
# ------------------ #

# name,resolution,position,scale
monitor=,preferred,auto,1.25

# upscale XWayland and adjust toolkit-specific scale
xwayland:force_zero_scaling = true
env = XCURSOR_THEME,Bibata-Modern-Ice
env = XCURSOR_SIZE,22

# uncomment for nvidia gpus
env = LIBVA_DRIVER_NAME,nvidia
env = GBM_BACKEND,nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME,nvidia
env = WLR_NO_HARDWARE_CURSORS,1

# xdg portal
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = GTK_USE_PORTAL,1

# theme
env = QT_QPA_PLATFORMTHEME,qt6ct
env = QT_STYLE_OVERRIDE,Adwaita-Dark
env = GTK_THEME,Adwaita:dark

# wayland flag (vscode smoothness)
env = ELECTRON_OZONE_PLATFORM_HINT,wayland
env = ELECTRON_USE_GL,desktop

# -------------------- #
#       PROGRAMS       #
# -------------------- #

$terminal = kitty
$fileManager = kitty yazi
$configDir = ~/.config

env = EDITOR,nvim


# --------------------- #
#       AUTOSTART       #
# --------------------- #

# login
exec-once=hyprlock || hyprctl dispatch exit

# reset cliphist
exec-once = cliphist wipe; wl-paste --watch cliphist store

# file explorer
exec-once = systemctl --user restart xdg-desktop-portal

# wallpaper
exec-once = swww-daemon

# spicetify pywal updates
exec-once = spicetify watch -s

# topbar
exec-once = waybar

# mako notifs
exec-once = mako

# gtk portals
exec-once = /usr/lib/xdg-desktop-portal-hyprland
exec-once = /usr/lib/xdg-desktop-portal-gtk

# idle
exec-once = hypridle

# audio
exec-once = swayosd-server -s ~/.config/swayosd/style.css

# ------------------- #
#       VISUALS       #
# ------------------- #

$active_border = rgba(33ccffee) rgba(00ff99ee) 45deg
$inactive_border = rgba(595959aa)

general {
    gaps_in = 5
    gaps_out = 20

    border_size = 2

    col.active_border = rgba(5B7395ee) rgba(c6c7c8ee) 45deg
    col.inactive_border = rgba(626b78aa)

    resize_on_border = false
    allow_tearing = false
    layout = dwindle
}

decoration {
    rounding = 10
    rounding_power = 2

    active_opacity = 0.8
    inactive_opacity = 0.8

    shadow {
        enabled = true
        range = 4
        render_power = 3
        color = rgba(1a1a1aee)
    }

    blur {
        enabled = true
        size = 4
        passes = 3

        vibrancy = 0.1696
    }
}

animations {
    enabled = yes, please :)

    bezier = easeOutQuint,0.23,1,0.32,1
    bezier = easeInOutCubic,0.65,0.05,0.36,1
    bezier = linear,0,0,1,1
    bezier = almostLinear,0.5,0.5,0.75,1.0
    bezier = quick,0.15,0,0.1,1

    animation = global, 1, 10, default
    animation = border, 1, 5.39, easeOutQuint
    animation = windows, 1, 4.79, easeOutQuint
    animation = windowsIn, 1, 4.1, easeOutQuint, popin 87%
    animation = windowsOut, 1, 1.49, linear, popin 87%
    animation = fadeIn, 1, 1.73, almostLinear
    animation = fadeOut, 1, 1.46, almostLinear
    animation = fade, 1, 3.03, quick
    animation = layers, 1, 3.81, easeOutQuint
    animation = layersIn, 1, 4, easeOutQuint, fade
    animation = layersOut, 1, 1.5, linear, fade
    animation = fadeLayersIn, 1, 1.79, almostLinear
    animation = fadeLayersOut, 1, 1.39, almostLinear
    animation = workspaces, 1, 1.94, almostLinear, fade
    animation = workspacesIn, 1, 1.21, almostLinear, fade
    animation = workspacesOut, 1, 1.94, almostLinear, fade
    animation = specialWorkspace, 1, 4, default, slidefadevert -50%
    animation = specialWorkspaceIn, 1, 4, default, slidefadevert -50%
    animation = specialWorkspaceOut, 1, 4, default, slidefadevert 50%
}

dwindle {
    pseudotile = true # master switch for pseudotiling. Enabling is bound to mainMod + P in the keybinds section below
    preserve_split = true # you probably want this
}

master {
    new_status = master
}

misc {
    force_default_wallpaper = 1
    disable_hyprland_logo = true
    disable_splash_rendering = true
}


# ----------------- #
#       INPUT       #
# ----------------- #

input {
    kb_layout = us
    kb_variant =
    kb_model =
    kb_options =
    kb_rules =

    follow_mouse = 1

    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.

    touchpad {
        natural_scroll = false
    }
}

gestures {
    workspace_swipe = false
}


# -------------------- #
#       KEYBINDS       #
# -------------------- #

$mainMod = SUPER # sets "Windows" key as main modifier

bind = $mainMod, Q, exec, $terminal
bind = $mainMod, C, killactive,
bind = $mainMod, M, exec, ~/.config/scripts/wlogout.sh
bind = $mainMod, E, exec, $fileManager
bind = $mainMod, V, togglefloating,
bind = $mainMod, SPACE, exec, ~/.config/scripts/rofi.sh
bind = $mainMod, P, pseudo, # dwindle
# bind = $mainMod, J, togglesplit, # dwindle

# move focus with vim keybindings
bind = $mainMod, H, movefocus, l
bind = $mainMod, J, movefocus, d
bind = $mainMod, K, movefocus, u
bind = $mainMod, L, movefocus, r

bind = $mainMod SHIFT, H, movewindow, l
bind = $mainMod SHIFT, J, movewindow, d
bind = $mainMod SHIFT, K, movewindow, u
bind = $mainMod SHIFT, L, movewindow, r

# switch workspaces with mainMod + [0-9]
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# move active window to a workspace with mainMod + SHIFT + [0-9]
bind = $mainMod SHIFT, 1, movetoworkspacesilent, 1
bind = $mainMod SHIFT, 2, movetoworkspacesilent, 2
bind = $mainMod SHIFT, 3, movetoworkspacesilent, 3
bind = $mainMod SHIFT, 4, movetoworkspacesilent, 4
bind = $mainMod SHIFT, 5, movetoworkspacesilent, 5
bind = $mainMod SHIFT, 6, movetoworkspacesilent, 6
bind = $mainMod SHIFT, 7, movetoworkspacesilent, 7
bind = $mainMod SHIFT, 8, movetoworkspacesilent, 8
bind = $mainMod SHIFT, 9, movetoworkspacesilent, 9
bind = $mainMod SHIFT, 0, movetoworkspacesilent, 10

# example special workspace (scratchpad)
bind = $mainMod, S, exec, pgrep spotify || spotify; hyprctl dispatch togglespecialworkspace spotify

# wallpaper change
bind = $mainMod, W, exec, ~/.config/scripts/wal.sh 1
bind = $mainMod SHIFT, W, exec, ~/.config/scripts/wal.sh -1

# scroll through existing workspaces with mainMod + scroll
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1

# screenshot binds
bind = SHIFT, Print, exec, grim -g "$(slurp)" - | swappy -f -
bind = ,Print, exec, grim - | swappy -f -

# clipboard hist
bind = $mainMod SHIFT, V, exec, cliphist list | rofi -dmenu -p "cliphist" | cliphist decode | wl-copy
bind = $mainMod SHIFT, P, exec, hyprpicker

# move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# laptop multimedia keys for volume and LCD brightness
bindel = , XF86AudioRaiseVolume, exec, swayosd-client --output-volume raise
bindel = , XF86AudioLowerVolume, exec, swayosd-client --output-volume lower
bindel = , XF86AudioMute, exec, swayosd-client --output-volume mute-toggle
bindel = , XF86AudioMicMute, exec, swayosd-client --input-volume mute-toggle
bindel = , XF86MonBrightnessUp, exec, swayosd-client --brightness raise
bindel = , XF86MonBrightnessDown, exec, swayosd-client --brightness lower

# requires playerctl
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous


# ------------------- #
#       WINDOWS       #
# ------------------- #

# ignore maximize requests from apps. You'll probably like this.
windowrule = suppressevent maximize, class:.*

# fix some dragging issues with XWayland
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

# rofi blur
layerrule = blur,rofi
layerrule = ignorezero,rofi

# wlogout
layerrule = blur,logout_dialog
layerrule = blur,wlogout
layerrule = blur,~/.config/scripts/wlogout.sh

# mako
layerrule = blur,mako

# spotify special workspace
windowrulev2 = workspace special:spotify, class:^(Spotify)$
windowrulev2 = workspace special:spotify, title:^(Spotify)$
